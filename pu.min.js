/* PopupJS (C) AlphaBrate 2024 | Released under APEL. | v1.0.1 */
let e,t={},pujs={getCssRule:function(e){let t;for(t=0;t<document.styleSheets.length;t+=1){let l,o=document.styleSheets[t];for(l=0;l<o.cssRules.length;l+=1){let t=o.cssRules[l];if(t.selectorText===e)return t}}return null},setup:{body_scrollable:!0,original:{position:"",height:"",top:"",overflow:"",width:"",overflowX:"",overflowY:"",scroll:0,scrollLeft:0},icons_path:"./icons/",init:function(){if(0===document.getElementsByClassName("alert").length){let e=document.createElement("div");e.classList.add("pujs-alert");let t=document.createElement("div");t.classList.add("alert-icon"),e.appendChild(t);let l=document.createElement("div");l.classList.add("alert-text"),e.appendChild(l),document.body.appendChild(e)}if(n(["close","check"]),!document.querySelector(".puJS-fullscreen-cover")){let e=document.createElement("div");e.classList.add("puJS-fullscreen-cover"),document.body.appendChild(e)}},todo:{alert:{start:function(){return!1},end:function(){return!1}},popup:{start:function(){return!1},end:function(){return!1}},pullOut:{start:function(){return!1},end:function(){return!1}}}}},l=document.getElementsByTagName("icon");async function o(){if(0===l.length)return;let e=l[0].getAttribute("data-icon"),n=l[0],s=n.parentElement,r=`${pujs.setup.icons_path}/${e}.svg`;if(t[e]){let l=document.createElement("span");l.innerHTML=t[e];let u=n.getAttribute("class");l.setAttribute("class",u),l.setAttribute("style","--mask-i: url("+r+")");try{s.replaceChild(l,n)}catch{}o()}else await fetch(r).then((e=>e.text())).then((l=>{let u=document.createElement("span");u.innerHTML=l;let c=n.getAttribute("class");u.setAttribute("class",c),u.setAttribute("style","--mask-i: url("+r+")");try{s.replaceChild(u,n)}catch{}o(),t[e]=l}))}function n(e=[]){e.forEach((e=>{fetch(`${pujs.setup.icons_path}/${e}.svg`).then((e=>e.text())).then((l=>{t[e]=l}))}))}o(),pujs.pullOutAlerts=[],pujs.lockscreen=function(){if(pujs.setup.body_scrollable){let e=window.innerWidth-document.documentElement.clientWidth;pujs.setup.original.scroll=window.scrollY||0,pujs.setup.original.scrollLeft=window.scrollX||0,pujs.setup.original.height=pujs.getCssRule("body").style.height||"auto",pujs.setup.original.width=pujs.getCssRule("body").style.width||"auto",pujs.setup.original.overflow=pujs.getCssRule("body").style.overflow||"auto",pujs.setup.original.overflowX=pujs.getCssRule("body").style.overflowX||"auto",pujs.setup.original.overflowY=pujs.getCssRule("body").style.overflowY||"auto",pujs.setup.original.position=pujs.getCssRule("body").style.position||"static",pujs.setup.original.top=pujs.getCssRule("body").style.top||0,pujs.setup.original.right=pujs.getCssRule("body").style.right||0,document.body.style.position="fixed",document.body.style.top="-"+pujs.setup.original.scroll+"px",document.body.style.height="100vh",document.body.style.width=`calc(100vw - ${e+"px"})`,document.body.style.right=e+"px",document.body.style.overflow="hidden"}},pujs.lockscreen.unlock=function(){pujs.setup.body_scrollable&&(document.body.style.position=pujs.setup.original.position,document.body.style.top=pujs.setup.original.top,document.body.style.height=pujs.setup.original.height,document.body.style.width=pujs.setup.original.width,document.body.style.overflow=pujs.setup.original.overflow,document.body.style.overflowX=pujs.setup.original.overflowX,document.body.style.overflowY=pujs.setup.original.overflowY,window.scrollTo(pujs.setup.original.scrollLeft,pujs.setup.original.scroll))},pujs.pullOutTouch={start_x:0,start_y:0,time:0,done:()=>{pujs.setup.todo.pullOut.end(),0===pujs.pullOutAlerts.length&&pujs.lockscreen.unlock()}},document.body.addEventListener("click",(function(e){let t=!1,l=e.target;try{for(;"BODY"!==l.nodeName;){if(l.classList.contains("pujs-poAlert")){t=!0;break}l=l.parentNode}}catch{}if(!t&&pujs.pullOutAlerts.length){pujs.pullOutAlerts[pujs.pullOutAlerts.length-1].style.animation="pujsPoAlertSlideOut .5s";try{let e=pujs.pullOutAlerts[pujs.pullOutAlerts.length-1].id;if(e){let t=pujs.pullOutAlerts.indexOf(e);t>-1&&pujs.pullOutAlerts.splice(t,1)}setTimeout((()=>{pujs.pullOutAlerts[pujs.pullOutAlerts.length-1].remove(),pujs.pullOutAlerts.pop(),pujs.pullOutTouch.done()}),500)}catch{}}})),document.body.addEventListener("touchstart",(function(e){"pujs-poAlert"===e.target.className&&(pujs.pullOutTouch.start_x=e.touches[0].clientX,pujs.pullOutTouch.start_y=e.touches[0].clientY,pujs.pullOutTouch.time=Date.now())})),document.body.addEventListener("touchmove",(function(e){if("pujs-poAlert"===e.target.className){let t=(e.touches[0].clientY-pujs.pullOutTouch.start_y)/window.innerHeight*100;e.target.style.transform="translateY("+Math.max(t,0)+"%)",e.target.style.willChange="transform",e.target.style.transition="none"}})),document.body.addEventListener("touchend",(function(e){if("pujs-poAlert"===e.target.className){if(pujs.pullOutAlerts.includes(e.target.id)){let t=pujs.toggledPullOut.indexOf(e.target.id);t>-1&&pujs.toggledPullOut.splice(t,1)}let t=(e.changedTouches[0].clientY-pujs.pullOutTouch.start_y)/window.innerHeight*100,l=Date.now()-pujs.pullOutTouch.time;t>30||t/l>.26?(e.target.style.transition="transform 0.5s",e.target.style.transform="translateY(100%)",setTimeout((()=>{e.target.remove(),pujs.pullOutAlerts.pop(),pujs.pullOutTouch.done()}),500)):(e.target.style.transition="transform 0.5s",e.target.style.transform="translateY(0)")}})),pujs.pullOut=(e="",t=!1,l=void 0)=>{pujs.setup.todo.pullOut.start(),setTimeout((()=>{let o=document.createElement("div");o.innerHTML=e,o.className="pujs-poAlert",t&&(o.style.display="block",o.style.overflowY="scroll"),l&&(o.id=l),pujs.lockscreen(),document.body.appendChild(o),pujs.pullOutAlerts.push(o)}),1)},pujs.alert=(t="",l="error",n=3e3,s=!1)=>{if(pujs.setup.todo.alert.start(),0===document.getElementsByClassName("alert").length){let e=document.createElement("div");e.classList.add("pujs-alert");let t=document.createElement("div");t.classList.add("alert-icon"),e.appendChild(t);let l=document.createElement("div");l.classList.add("alert-text"),e.appendChild(l),document.body.appendChild(e)}e&&clearTimeout(e),s?(document.querySelector(".alert-text").style.userSelect="text",document.querySelector(".alert-text").style.pointerEvents="auto"):(document.querySelector(".alert-text").style.userSelect="none",document.querySelector(".alert-text").style.pointerEvents="none");let r,u={error:{i:"close",c:"color-red"},success:{i:"check",c:"bg-green"}};r=u[l]?u[l].i||"close":l,document.querySelector(".alert-icon").innerHTML=`<icon data-icon='${r}' class='alert-icon stroke ${u[l]?u[l].c:""}'></icon>`,document.querySelector(".alert-text").innerHTML=t,o(),document.querySelector(".pujs-alert").classList.add("show"),e=setTimeout((()=>{document.querySelector(".pujs-alert").classList.remove("show"),pujs.setup.todo.alert.end()}),n)},pujs.popup=(e="",t="",l=[{text:"OK",callback:()=>{}}],o="vert",n=void 0)=>{if(pujs.setup.todo.popup.start(),pujs.lockscreen(),!document.querySelector(".puJS-fullscreen-cover")){let e=document.createElement("div");e.classList.add("puJS-fullscreen-cover"),document.body.appendChild(e)}document.querySelector(".puJS-fullscreen-cover").style.opacity=1,document.querySelector(".puJS-fullscreen-cover").style.pointerEvents="all";let popup=document.createElement("div");popup.classList.add("puJS-popup");let s="";if(n&&n.forEach((e=>{let t=document.createElement("input");t.classList.add("input"),t.classList.add("pujs-popup-inp"),t.placeholder=e.placeholder||"",t.value=e.value||"",t.type=e.type||"text",s+=t.outerHTML})),popup.innerHTML=`<div class='puJS-popup-container'><div class='padding'><div class='title'>${e}</div><div class='message'>${t}</div>${s}</div><div class='buttons'></div></div>`,"vert"===o)l.forEach((e=>{let t=document.createElement("button");t.classList.add("puJS-popup-button"),t.innerHTML=e.text,e.color&&(t.style.color=e.color),t.addEventListener("click",e.callback),t.addEventListener("click",(e=>{pujs.setup.todo.popup.end(),pujs.lockscreen.unlock(),n&&(pujs.popup.value=document.querySelector(".pujs-popup-inp").value),e.target.parentElement.parentElement.remove(),document.querySelector(".puJS-fullscreen-cover").style.opacity=0,document.querySelector(".puJS-fullscreen-cover").style.pointerEvents="none"})),popup.querySelector(".buttons").appendChild(t)}));else{let e,t=document.createElement("div");for(t.classList.add("button-container"),e=0;e<2;e+=1){let o=document.createElement("button");o.classList.add("puJS-popup-button"),o.innerHTML=l[e].text,l[e].color&&(o.style.color=l[e].color),o.addEventListener("click",l[e].callback),o.addEventListener("click",(e=>{pujs.setup.todo.popup.end(),pujs.lockscreen.unlock(),n&&(pujs.popup.value=document.querySelector(".pujs-popup-inp").value),e.target.parentElement.parentElement.parentElement.remove(),document.querySelector(".puJS-fullscreen-cover").style.opacity=0,document.querySelector(".puJS-fullscreen-cover").style.pointerEvents="none"})),t.appendChild(o)}popup.querySelector(".buttons").appendChild(t)}popup.querySelector("button").classList.add("emphasized"),document.body.appendChild(popup)};